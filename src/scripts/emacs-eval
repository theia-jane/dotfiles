#!/usr/bin/env bash

EXTRA_PARAMS=""
while true; do
  case "$1" in
    -c)
      EXTRA_PARAMS="$1 "
      shift 1 
      ;;
      *)
      break
      ;;
  esac
done

SCRIPT_NAME="$1"
shift
ARGS=("${@/#/\"}")
ARGS=("${ARGS[@]/%/\"}")

emacsdclient-bg $EXTRA_PARAMS -e "
(let ((argv '(${ARGS[@]}))) 
  $(script-contents "$SCRIPT_NAME")
)" 
